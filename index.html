<!DOCTYPE html>
<html lang="cs" data-theme="dark">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>R√°dio Kombin√°tor - Dynamick√° R√°dia</title>
    <style>
        /* --- CSS --- */

        :root, [data-theme="dark"] {
            --bg: #121212;
            --text: #e0e0e0;
            --card-bg: #1e1e1e;
            --accent: #4da6ff;
            --shadow: rgba(255, 255, 255, 0.1);
        }

        body, html {
            margin: 0; padding: 0;
            font-family: Arial, sans-serif;
            background: var(--bg);
            color: var(--text);
        }
        a { text-decoration: none; color: var(--accent); }
        a:hover { text-decoration: underline; }

        header {
            background: var(--card-bg);
            box-shadow: 0 2px 8px var(--shadow);
            position: sticky;
            top: 0;
            z-index: 1000;
        }
        
        /* Nov√Ω kontejner pro hlaviƒçku a dar */
        .header-content {
            padding: 1rem 20px 0.5rem 20px;
            position: relative; 
        }

        header h1 { 
            margin: 0; 
            font-size: 1.6rem; 
            color: var(--accent); 
        }
        
        /* NOV√ù STYL PRO ZKU≈†EBN√ç VERZI */
        .version-status {
            display: block;
            margin: 2px 0 5px 0;
            font-size: 0.8rem;
            color: #ffcc00; /* ≈Ωlut√° barva pro varov√°n√≠/status */
            font-weight: bold;
        }

        /* STYL PRO MINI PAYPAL ODKAZ V HLAVIƒåCE */
        .header-paypal {
            font-size: 0.9rem;
            margin: 5px 0 0 0;
            display: block;
        }
        .header-paypal a {
            color: #0070BA; 
            font-weight: bold;
        }

        /* STYL PRO UM√çSTƒöN√ç POƒå√çTADLA */
        .visit-counter-container {
            position: absolute;
            top: 15px; 
            right: 20px; 
            text-align: right; 
            margin-top: 0; 
            line-height: 1;
        }
        .visit-counter-label {
            font-size: 0.7rem; 
            color: #aaa;
            font-weight: bold;
            display: block; 
        }
        .visit-counter-container img {
            margin-top: 5px; 
        }

        nav {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            padding: 10px 20px;
            background: var(--bg);
            border-bottom: 1px solid #333;
        }

        nav button {
            padding: 8px 15px;
            border: 1px solid var(--accent);
            background: var(--card-bg);
            color: var(--text);
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
            transition: background 0.2s, color 0.2s;
        }

        nav button:hover {
            background: var(--accent);
            color: var(--bg);
        }

        nav button.active {
            background: var(--accent);
            color: var(--bg);
        }
        
        #paymentInfoBlock {
            flex-grow: 1; 
            display: flex;
            align-items: center;
            padding: 0 10px; 
            background: var(--card-bg);
            border-radius: 6px;
            margin: 0 10px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            box-shadow: inset 0 0 5px rgba(77, 166, 255, 0.2);
        }

        .main-content {
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }

        #radioList {
            list-style: none;
            padding: 0;
            margin: 0;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 10px;
        }

        .station-item {
            background: var(--card-bg);
            padding: 12px 15px;
            border-radius: 8px;
            box-shadow: 0 1px 3px var(--shadow);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
            transition: border-left 0.3s;
        }
        .station-info { flex-grow: 1; min-width: 0; }
        .station-info h3 { margin: 0 0 4px 0; font-size: 1.1rem; }
        .station-info small { display: block; color: #aaa; }
        
        .fixed-station { border-left: 5px solid var(--accent); }

        .station-actions button {
            padding: 8px 12px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: background 0.2s;
        }
        .play-btn { background: var(--accent); color: var(--bg); }
        .play-btn:hover { background: #0056b3; color: white; }
        .link-btn { background: #333; color: var(--accent); border: 1px solid #555; }

        .player-area {
            background: var(--card-bg);
            padding: 15px 20px;
            border-radius: 10px;
            box-shadow: 0 4px 10px var(--shadow);
            margin-top: 20px;
            text-align: center;
            display: none;
            border: 1px solid var(--accent);
        }
        .player-area audio {
            width: 100%;
            max-width: 600px;
            filter: invert(100%); 
        }

        #genresContainer {
            margin-top: 10px;
            margin-bottom: 15px;
            display: none;
        }

        #genresList {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }
        #genresList button {
            padding: 8px 14px;
            border-radius: 20px;
            background: #333; 
            border: 1px solid #555;
            cursor: pointer;
            transition: 0.2s;
            white-space: nowrap;
            color: #e0e0e0;
        }
        #genresList button:hover, #genresList button.active {
            background: var(--accent);
            color: var(--bg);
            border-color: var(--accent);
        }
        .genre-title {
            font-size: 1.2rem;
            margin-bottom: 10px;
            color: var(--accent);
            font-weight: bold;
        }

        #paymentInfoDetails {
            margin-top: 20px;
        }
        #searchEnginesList {
            list-style: none;
            padding-left: 0;
        }
        #searchEnginesList li {
            background: var(--card-bg);
            margin-bottom: 10px;
            padding: 12px 15px;
            border-radius: 6px;
            border: 1px solid #333;
            font-size: 1.1rem;
            font-weight: 600;
        }
        
        .donation-block {
            margin-top: 15px; 
            padding: 15px; 
            border: 1px dashed var(--accent); 
            border-radius: 8px; 
            background: rgba(102, 187, 106, 0.1);
        }
        .paypal-btn {
            display: inline-block;
            background-color: #0070BA; 
            color: white;
            padding: 8px 15px;
            border-radius: 5px;
            font-weight: bold;
            margin-top: 10px;
            margin-right: 10px;
            transition: background-color 0.2s;
        }
        .paypal-btn:hover {
            background-color: #005f9c;
            text-decoration: none;
        }
        
        /* NOV√ù STYL PRO UPOZORNƒöN√ç NA LICENCI (VR√ÅCEN√ù) */
        .license-warning {
            padding: 20px;
            border: 2px solid #ff0000; 
            border-radius: 8px;
            background: rgba(255, 0, 0, 0.1);
            margin-top: 20px;
        }
        .license-warning h3 {
            color: #ff0000 !important;
        }
        .license-price-agreement { 
            font-weight: bold; 
            display: block; 
            margin: 10px 0; 
            padding: 5px; 
            background: #333; 
            border-radius: 4px; 
            text-align: center; 
            color: #ffcc00;
        }


        @media (max-width: 600px) {
            nav { flex-direction: column; }
            nav button { width: 100%; margin-bottom: 5px; }
            #paymentInfoBlock { 
                order: 10; 
                width: 100%; 
                margin: 5px 0; 
                height: 40px; 
                justify-content: center;
            }
            .station-item { flex-direction: column; align-items: flex-start; }
            .station-actions { width: 100%; display: flex; gap: 5px; }
            .station-actions button { flex-grow: 1; }
            /* √öprava pozice poƒç√≠tadla na mobilu */
            .visit-counter-container {
                position: relative; 
                top: 0;
                right: 0;
                padding-right: 0;
                margin-top: 10px; 
                text-align: center;
                border-top: 1px solid var(--text); 
                padding-top: 5px;
            }
        }
    </style>
</head>
<body>

<header>
    <div class="header-content">
        <h1>üåê R√°dio Kombin√°tor</h1>
        <span class="version-status">
            *ZKU≈†EBN√ç VERZE*. Brzy bude spu≈°tƒõna ofici√°ln√≠ str√°nka.
        </span>
        <div class="visit-counter-container">
            <span class="visit-counter-label">Glob√°ln√≠ n√°v≈°tƒõvy: </span>
            <img src="https://hits.sh/github.com/Pludvik/radio-kombinator.svg?style=flat" alt="N√°v≈°tƒõvy" />
        </div>
        
        <p class="header-paypal">
            <a href="https://paypal.me/PetrLudvik" target="_blank">
                üíñ Podpo≈ôte autora p≈ôes PayPal
            </a>
        </p>
        </div>
</header>

<nav>
    <button id="nav-searchEngines" onclick="selectView('searchEngines')">
        ‚ÑπÔ∏è Info a Podpora
    </button>
    
    <button id="nav-cz" onclick="selectView('cz')">üá®üáø ƒåesk√° R√°dia</button>
    <button id="nav-world" onclick="selectView('world')">üåç Svƒõtov√° R√°dia</button>
    <button id="nav-genres" onclick="selectView('genres')">üéß CZ podle ≈Ω√°nru</button>
    <button id="nav-world-genres" onclick="selectView('world-genres')">üåç World podle ≈Ω√°nru</button>
    
    <div id="paymentInfoBlock">
        <span style="font-weight: bold; color: #66bb6a;">
            üíñ Podpo≈ôte Autora:
        </span>
        <span style="font-weight: bold; margin-left: 5px;">
            <a href="#paymentInfoDetails" id="paymentInfoLink" style="color: var(--accent); text-decoration: none;">Dobrovoln√Ω Dar</a>
        </span>
    </div>
    </nav>

<div class="main-content">

    <div class="player-area" id="playerArea">
        <div class="player-label" id="playerLabel">P≈ôehr√°vaƒç</div>
        <audio id="audioPlayer" controls autoplay></audio>
    </div>
    
    <div id="genresContainer">
        <div class="genre-title" id="genresTitle">Vyberte ≈æ√°nr pro filtrov√°n√≠ stanic:</div>
        <div id="genresList"></div>
    </div>
    
    <div id="paymentInfoDetails" style="display: none;"> 
        <div class="donation-block" id="mainContentDonationBlock">
            <h3 style="margin-top: 0; color: #66bb6a;">
                Dobrovoln√Ω Dar / Podpora Autora
            </h3>
            
            <p>
                Tento **R√°dio Kombin√°tor** je pro v√°s volnƒõ k pou≈æit√≠. Pokud se v√°m l√≠b√≠, pou≈æ√≠v√°te ho a chtƒõli byste podpo≈ôit jeho v√Ωvoj a √∫dr≈æbu, m≈Ø≈æete poslat **dobrovoln√Ω dar** na n√≠≈æe uveden√Ω √∫ƒçet. Ka≈æd√° podpora pom√°h√°!
            </p>
            <p style="font-weight: bold; margin-bottom: 0; color: var(--accent);">
                üí∞ Platebn√≠ instrukce pro Dar (Dƒõkujeme za podporu!)
            </p>
            <ul style="list-style: none; padding-left: 15px; font-family: monospace; font-size: 1.1em; margin-bottom: 5px;">
                <li>ƒå√≠slo √∫ƒçtu: **1018678746/5500** (Raiffeisenbank)</li>
                <li>Do zpr√°vy pro p≈ô√≠jemce uveƒète: **DAR Radio Kombin√°tor**</li>
            </ul>
            <a href="https://paypal.me/PetrLudvik" target="_blank" class="paypal-btn">
                PayPal
            </a>
            <span style="font-size: 0.9em; color: #ccc;">(p≈ôesmƒõrov√°n√≠ na paypal.me/PetrLudvik)</span>
        </div>
        
        <h3 style="margin-top: 30px; color: var(--accent);">üîó Extern√≠ Vyhled√°vaƒçe R√°di√≠ (Zdroj Dat)</h3>
        <p style="color: #777; margin-top: 5px;">Pro nalezen√≠ dal≈°√≠ch stream≈Ø pou≈æijte tyto extern√≠ zdroje:</p>
        <ul id="searchEnginesList">
            <li><a href="https://www.radio-browser.info" target="_blank" rel="noopener noreferrer">Radio-browser.info</a> ‚Äì **Open source datab√°ze r√°di√≠ (hlavn√≠ zdroj dat pro tuto str√°nku)**</li>
            <li><a href="https://radios.cz" target="_blank" rel="noopener noreferrer">Radios.cz</a> ‚Äì ƒåesk√Ω katalog internetov√Ωch r√°di√≠ a stream≈Ø</li>
            <li><a href="https://tunein.com" target="_blank" rel="noopener noreferrer">TuneIn.com</a> ‚Äì Glob√°ln√≠ a obl√≠ben√° platforma pro streamov√°n√≠ r√°di√≠</li>
        </ul>
        
        <div class="license-warning">
            <h3 style="margin-top: 0;">
                üö® UPOZORNƒöN√ç K LICENCI A U≈ΩIT√ç
            </h3>
            <p style="font-weight: bold;">
                Softwarov√© d√≠lo "R√°dio Kombin√°tor" je poskytov√°no **pouze pro osobn√≠, studijn√≠ a nekomerƒçn√≠ u≈æit√≠** ("AS IS").
            </p>
            <p>
                **POZOR!** K√≥d a obsah sm√≠ b√Ωt nahr√°n a ve≈ôejnƒõ sd√≠len na jak√©mkoli webu (komerƒçn√≠m i nekomerƒçn√≠m) **POUZE V P≈ò√çPADƒö, ≈ΩE VLASTN√çK WEBU Z√çSKAL EXPLICITN√ç P√çSEMN√ù SOUHLAS AUTORA.** Bez tohoto souhlasu je jak√©koliv ve≈ôejn√© sd√≠len√≠ zak√°z√°no.
            </p>
            
            <p style="color: red; font-weight: bold;">
                Ve≈°ker√° autorsk√° pr√°va z≈Øst√°vaj√≠ Autorovi.
            </p>
            
            <p>
                <span style="font-weight: bold;">Podm√≠nky pro souhlas s u≈æit√≠m/sd√≠len√≠m:</span>
                <span class="license-price-agreement">
                    Kontaktujte autora pro z√≠sk√°n√≠ povolen√≠.
                </span>
            </p>
            
            <p>
                V p≈ô√≠padƒõ z√°jmu o souhlas s u≈æit√≠m ƒçi √∫pravami k√≥du, mƒõ pros√≠m kontaktujte:
                <br>
                <span style="font-weight: bold;">Email:</span> <a href="mailto:pludvik85@gmail.com">pludvik85@gmail.com</a>
            </p>
        </div>
        </div>
    <ul id="radioList">
        <li>Naƒç√≠t√°m poƒç√°teƒçn√≠ stanice...</li>
    </ul>

</div>

<script>
    const API_URL = "https://de1.api.radio-browser.info/json/stations";

    // --- DOM Elementy ---
    const radioListEl = document.getElementById('radioList');
    const playerArea = document.getElementById('playerArea');
    const playerLabel = document.getElementById('playerLabel');
    const audioPlayer = document.getElementById('audioPlayer');
    const genresContainer = document.getElementById('genresContainer');
    const genresList = document.getElementById('genresList');
    const genresTitle = document.getElementById('genresTitle');
    const paymentInfoDetails = document.getElementById('paymentInfoDetails');

    // --- CENTRALIZOVAN√ù STAV A DATA ---
    const AppState = {
        czStations: [],
        worldStations: [],
        currentView: 'searchEngines', 
        activeGenre: null, 
    };

    // --- POMOCN√â FUNKCE ---

    function getFlagEmoji(countryCode) {
        if (!countryCode || countryCode.length !== 2) return '';
        const codePoints = countryCode.toUpperCase().split('').map(c => 127397 + c.charCodeAt());
        return String.fromCodePoint(...codePoints);
    }

    function capitalize(str) {
        if (!str || str.trim() === '') return '';
        return str.charAt(0).toUpperCase() + str.slice(1);
    }

    // Generov√°n√≠ polo≈æky r√°dia
    function generateStationItemHTML(st, isCzech = false) {
        
        const countryInfo = isCzech ? `ƒåesko ${getFlagEmoji('CZ')}` : `${st.country} ${getFlagEmoji(st.countrycode)}`;
        const tags = st.tags ? st.tags.split(',').map(t => capitalize(t.trim())).filter(t => t.length > 0).slice(0, 3).join(', ') : 'Nezn√°m√©';
        const nameDisplay = st.name.length > 50 ? st.name.substring(0, 47) + '...' : st.name;
        const streamUrl = st.url_resolved || st.url;

        const buttonDisabled = streamUrl ? '' : 'disabled';
        const buttonText = streamUrl ? '‚ñ∂ P≈ôehr√°t' : 'üîé Hledej';

        return `
            <li class="station-item" data-name="${st.name}" data-country="${st.country}" data-tags="${st.tags}">
                <div class="station-info">
                    <h3>${nameDisplay}</h3>
                    <small>
                        ${countryInfo} 
                        ${st.city ? `| Mƒõsto: ${st.city}` : ''}
                        | ≈Ω√°nry: ${tags}
                    </small>
                </div>
                <div class="station-actions">
                    <button 
                        class="play-btn" 
                        data-url="${streamUrl || ''}" 
                        data-name="${st.name}"
                        onclick="${streamUrl ? 'playStation(this)' : 'alert(`Stream pro ${st.name} nebyl v API nalezen. Zkuste odkaz Web.`)'}"
                        ${buttonDisabled}>
                        ${buttonText}
                    </button>
                    <a href="${st.homepage}" target="_blank" rel="noopener noreferrer" class="link-btn" style="${st.homepage ? '' : 'display:none;'}">üåê Web</a>
                </div>
            </li>
        `;
    }

    // Render seznamu stanic do DOM
    function renderStationList(stations, isCzech = false) {
        let finalStations = stations;
        
        if(!finalStations || finalStations.length === 0) {
            radioListEl.innerHTML = '<li>Nebyly nalezeny ≈æ√°dn√© stanice odpov√≠daj√≠c√≠ filtru/v√Ωbƒõru.</li>';
            return;
        }
        radioListEl.innerHTML = finalStations.map(s => generateStationItemHTML(s, isCzech)).join('');
    }

    // --- FUNKCE PRO NAƒå√çT√ÅN√ç DAT Z API ---

    async function fetchData(endpoint, count, filterCZ = false) {
        try {
            const url = count ? `${API_URL}/${endpoint}/${count}` : `${API_URL}/${endpoint}`;
            const res = await fetch(url);
            if (!res.ok) throw new Error(`Selhalo z√≠sk√°n√≠ dat z API. Status: ${res.status}`);
            let data = await res.json();
            
            if(filterCZ) {
                data = data.filter(s => s.countrycode !== 'CZ');
            }
            
            return data;
        } catch(e) {
            console.error("Chyba p≈ôi stahov√°n√≠ z API:", e);
            return [];
        }
    }

    // NAƒå√çT√ÅN√ç V≈†ECH CZ R√ÅDI√ç
    async function fetchCZStations() {
        radioListEl.innerHTML = '<li>‚è≥ Naƒç√≠t√°m **v≈°echna** ƒçesk√° r√°dia z API Radio-Browser...</li>'; 
        
        const apiData = await fetchData('bycountrycodeexact/CZ', null);

        if (apiData.length === 0) {
            radioListEl.innerHTML = '<li>‚ö†Ô∏è Nepoda≈ôilo se naƒç√≠st data z API nebo nebyly nalezeny CZ stanice. Zkuste to pozdƒõji nebo zkontrolujte konzoli prohl√≠≈æeƒçe.</li>';
            AppState.czStations = [];
            return;
        }

        const validStations = apiData.filter(s => s.url_resolved || s.url);
        
        AppState.czStations = validStations;

        if(AppState.currentView === 'cz' || AppState.currentView === 'genres') {
            if(AppState.currentView === 'cz') renderStationList(AppState.czStations, true);
            generateGenresButtons(AppState.czStations);
        } else {
             radioListEl.innerHTML = '<li>Data pro jinou sekci jsou naƒçtena.</li>';
        }
    }

    async function fetchWorldStations() {
        radioListEl.innerHTML = '<li>‚è≥ Naƒç√≠t√°m svƒõtov√° r√°dia (Max 8000 nejklik√°nƒõj≈°√≠ch)...</li>';
        const data = await fetchData('topclick', 8000, true); 
        
        if (data.length === 0) {
            radioListEl.innerHTML = '<li>‚ö†Ô∏è Nepoda≈ôilo se naƒç√≠st svƒõtov√° r√°dia z API.</li>';
            AppState.worldStations = [];
            return;
        }

        AppState.worldStations = data.filter(s => s.url_resolved || s.url); 
        if(AppState.currentView === 'world' || AppState.currentView === 'world-genres') {
            if(AppState.currentView === 'world') renderStationList(AppState.worldStations, false);
            generateGenresButtons(AppState.worldStations);
        } else {
            radioListEl.innerHTML = '<li>Data pro jinou sekci jsou naƒçtena.</li>';
        }
    }

    // --- FUNKCE PRO ≈Ω√ÅNRY A FILTROV√ÅN√ç ---

    function generateGenresButtons(stations) {
        let genreMap = new Map();
        stations.forEach(s => {
            if(s.tags) {
                s.tags.split(',').forEach(t => {
                    const trimmed = t.trim().toLowerCase();
                    if(trimmed.length > 2 && trimmed.length < 20 && !/\d/.test(trimmed)) {
                        genreMap.set(trimmed, (genreMap.get(trimmed) || 0) + 1);
                    }
                });
            }
        });
        
        const genres = Array.from(genreMap.keys())
            .filter(g => genreMap.get(g) >= 5)
            .sort();

        genresList.innerHTML = genres.map(g => 
            `<button onclick="loadGenre('${g}', this)" class="${AppState.activeGenre === g ? 'active' : ''}">${capitalize(g)}</button>`
        ).join('');
    }
    
    function loadGenre(genre, button) {
        const isCZ = AppState.currentView === 'genres';
        const stationsToFilter = isCZ ? AppState.czStations : AppState.worldStations;
        
        if (AppState.activeGenre === genre) {
            AppState.activeGenre = null;
            document.querySelectorAll('#genresList button').forEach(btn => btn.classList.remove('active'));
        } else {
            AppState.activeGenre = genre;
            document.querySelectorAll('#genresList button').forEach(btn => btn.classList.remove('active'));
            if (button) button.classList.add('active');
        }

        genresTitle.textContent = (isCZ ? `ƒåesk√© r√°dia: ` : `Svƒõtov√° r√°dia: `) + (AppState.activeGenre ? `≈Ω√°nr: ${capitalize(AppState.activeGenre)}` : `V≈°echny ≈æ√°nry`);
        
        if (!AppState.activeGenre) {
             renderStationList(stationsToFilter, isCZ);
             return;
        }

        const filtered = stationsToFilter.filter(s => 
            s.tags && s.tags.toLowerCase().split(',').map(t => t.trim()).includes(AppState.activeGenre)
        );

        if(filtered.length === 0) {
            radioListEl.innerHTML = `<li>Pro ≈æ√°nr <strong>${capitalize(AppState.activeGenre)}</strong> nebyly nalezeny ≈æ√°dn√© stanice.</li>`;
        } else {
            renderStationList(filtered, isCZ);
        }
    }

    // --- FUNKCE PRO P≈òEHR√ÅV√ÅN√ç ---

    function playStation(buttonElement) {
        let url = buttonElement.getAttribute('data-url');
        const name = buttonElement.getAttribute('data-name');
        
        // Reset a vizu√°ln√≠ zpƒõtn√° vazba
        document.querySelectorAll('.station-actions button').forEach(btn => {
            if (btn.classList.contains('play-btn') && btn !== buttonElement) {
                btn.textContent = '‚ñ∂ P≈ôehr√°t';
            }
        });
        buttonElement.textContent = '... Naƒç√≠t√°m ...';

        // HTTPS Korekce pro GitHub Pages
        if (url && url.startsWith('http://')) {
            url = url.replace('http://', 'https://');
        }
        
        playerArea.style.display = 'block';
        playerLabel.textContent = `P≈ô√≠prava: ${name}`;

        if (audioPlayer.src !== url) {
            audioPlayer.pause();
            audioPlayer.src = url;
            audioPlayer.load();
        }

        audioPlayer.play().then(() => {
            playerLabel.textContent = `‚ñ∂ Hraje: ${name}`;
            buttonElement.textContent = '‚úî Hraje'; // Potvrzen√≠
        }).catch(e => {
            console.error("Chyba p≈ôehr√°v√°n√≠:", e);
            playerLabel.textContent = `‚ùå Chyba p≈ôi spu≈°tƒõn√≠ ${name}. Zkuste Web.`;
            audioPlayer.src = "";
            buttonElement.textContent = '‚ùå Selhalo'; // Potvrzen√≠ selh√°n√≠
        });
    }


    // --- FUNKCE PRO P≈òEP√çN√ÅN√ç POHLED≈Æ A T√âMA ---

    async function selectView(viewName) {
        AppState.currentView = viewName;
        AppState.activeGenre = null;
        
        // Reset vizu√°ln√≠ho stavu
        document.querySelectorAll('nav button').forEach(btn => btn.classList.remove('active'));
        document.getElementById(`nav-${viewName}`).classList.add('active');
        genresContainer.style.display = 'none';
        paymentInfoDetails.style.display = 'none';
        radioListEl.style.display = 'grid';
        
        // Reset tlaƒç√≠tka p≈ôehr√°v√°n√≠
        document.querySelectorAll('.station-actions button.play-btn').forEach(btn => btn.textContent = '‚ñ∂ P≈ôehr√°t');
        

        switch(viewName) {
            case 'cz':
                if(AppState.czStations.length === 0) await fetchCZStations();
                else renderStationList(AppState.czStations, true);
                break;

            case 'world':
                if(AppState.worldStations.length === 0) await fetchWorldStations();
                else renderStationList(AppState.worldStations, false);
                break;

            case 'genres':
                genresContainer.style.display = 'block';
                if(AppState.czStations.length === 0) await fetchCZStations();
                else {
                    generateGenresButtons(AppState.czStations);
                    radioListEl.innerHTML = '<li>Vyberte ≈æ√°nr z tlaƒç√≠tek v√Ω≈°e pro filtrov√°n√≠ ƒçesk√Ωch stanic.</li>';
                }
                break;

            case 'world-genres':
                genresContainer.style.display = 'block';
                if(AppState.worldStations.length === 0) await fetchWorldStations();
                else {
                    generateGenresButtons(AppState.worldStations);
                    radioListEl.innerHTML = '<li>Vyberte ≈æ√°nr z tlaƒç√≠tek v√Ω≈°e pro filtrov√°n√≠ svƒõtov√Ωch stanic.</li>';
                }
                break;

            case 'searchEngines':
                paymentInfoDetails.style.display = 'block';
                radioListEl.style.display = 'none';
                break;

            default:
                radioListEl.innerHTML = '<li>Nezn√°m√Ω re≈æim.</li>';
                break;
        }
    }
    
    // P≈ÆVODN√ç initializeTheme() a toggleTheme() ODSTRANƒöNY/UPRAVENY
    function initialize() {
        document.getElementById('paymentInfoLink').addEventListener('click', (e) => {
            e.preventDefault();
            selectView('searchEngines');
            window.location.hash = 'paymentInfoDetails';
        });
        selectView('searchEngines'); 
    }

    // --- INICIALIZACE ---

    initialize();
</script>

</body>
</html>
